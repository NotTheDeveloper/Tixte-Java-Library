name: Deploy Javadoc

on:
    push:
        branches:
            - main

jobs:
    publish:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
              with:
                  fetch-depth: 0
            - uses: actions/setup-java@v1
              with:
                  java-version: 19
                  java-package: jdk+fx
            - name: Make gradlew executable
              run: chmod +x ./gradlew
            - name: Generate Javadoc
              run: ./gradlew aggregateJavadocs
            - name: Deploy ðŸš€
              uses: JamesIves/github-pages-deploy-action@4.4.1
              with:
                  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
                  BRANCH: gh-pages
                  CLEAN: true
                  FOLDER: build/docs/javadoc
                  TARGET_FOLDER: javadoc
